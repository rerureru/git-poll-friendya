<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="db.mybatis.BoardPageMapper">
	<select id="getGNBList" resultType="CDDto">
		select * from cd where CDKINDID="1" 
	</select>
	
	<select id="getLNBListByGNBId"  parameterType="String" resultType="CDDto">
		select * from cd where CDKINDID=2 and CDVALOPT1=#{clickedCategory}
	</select>
	
	<select id="getGNBIdByLNBId"  parameterType="String" resultType="String">
		select CDVALOPT1 from cd where CDKINDID=2 and CDval=#{category}
	</select>
	
	<select id="getArticleListAll" resultMap="boardDtoResultMap">
		select b.BOARDID, b.CATETORYID, b.SUBJECT, b.HITCNT, 
		b.RECOMMENDCNT, b.CREATOR,b.CREATEDATE, b.UPDATEDATE, c.CDVAL, c.CDNAME 
		from board b, cd c 
		where c.CDKINDID=2 and b.CATETORYID=c.CDVAL 
 	</select>
 	
 	
	
	<select id="getArticleListInLNB" resultMap="boardDtoResultMap">
		select b.BOARDID, b.CATETORYID, b.SUBJECT, b.HITCNT, 
		b.RECOMMENDCNT, b.CREATOR,b.CREATEDATE, b.UPDATEDATE, c.CDVAL, c.CDNAME 
		from board b, cd c 
		where c.CDKINDID=2 and b.CATETORYID=c.CDVAL and b.CATETORYID=#{lnb}
	</select>
	
	<select id="getArticleListInGNB" resultMap="boardDtoResultMap">
		select b.BOARDID, b.CATETORYID, b.SUBJECT, b.HITCNT, 
		b.RECOMMENDCNT, b.CREATOR,b.CREATEDATE, b.UPDATEDATE, c.CDVAL, c.CDNAME 
		from board b, cd c 
		where c.CDKINDID=2 
				and b.CATETORYID=c.CDVAL 
				and CATETORYID in (select CDVAL from cd where CDVALOPT1=#{gnb})
	</select>
	
	<resultMap id="boardDtoResultMap" type="BoardDto">
 		<id column="BOARDID" jdbcType="INTEGER" property="boardID" />
 		<result column="CATETORYID" jdbcType="VARCHAR" property="catetoryID" />
 		<result column="SUBJECT" jdbcType="VARCHAR" property="subject" />
 		<result column="HITCNT" jdbcType="VARCHAR" property="hitCNT" />
 		<result column="RECOMMENDCNT" jdbcType="INTEGER" property="recommendCNT" />
 		<result column="CREATOR" jdbcType="INTEGER" property="creator" />
 		<result column="CREATEDATE" jdbcType="TIMESTAMP" property="createDate" />
 		<result column="UPDATEDATE" jdbcType="TIMESTAMP" property="updateDate" />
 		<association property="lnb" column="CATETORYID" javaType="CDDto">
 			<id column="CDVAL" jdbcType="INTEGER" property="cDVal" />
 			<result column="CDVAL" jdbcType="VARCHAR" property="cDVal" />
 			<result column="CDNAME" jdbcType="VARCHAR" property="cDName" />
 		</association>
 	</resultMap>
</mapper>